<!DOCTYPE html>
<html>
	<head>
		<title>Bible Trivia</title>
		<link rel="stylesheet" type="text/css" href="/index.css">
		<link rel="stylesheet" type="text/vss" hred="/normalize.min.css">
		<script type="text/javascript" src="/vue.js"></script>
	</head>
	<body>
		<div id="vue-app">
			<message-box
				v-if="message.value"
				v-on:clear-message="clearMessage"
				v-bind:value.sync="message.value"
				v-bind:level.sync="message.level"
			></message-box>
			<button id="new-game-button" v-if="!newGameMenu" v-on:click="clearGame">New Game</button>
			<!-- message-box and new-game-button are absolutely positioned -->

			<h1>Bible Trivia</h1>
			<start-menu v-if="newGameMenu" v-on:submitted="startGame"></start-menu>
			
			<div v-else id="game">
				<div id="chapter-selector" v-if="chapterSelector.active" class="model">
					<div class="model-content">
						<h2>{{ chapterSelector.book.name }}</h2>
						<label>
							Chapter
							<select v-model="chapterSelector.chosen" v-bind:disabled="chapterSelector.disabled">
								<option v-for="c in chapterSelector.count" v-bind:value="c">{{ c }}</option>
							</select>
						</label>
						<br>
						<br>
						<button v-on:click="closeChapterSelector" vi-bind:disabled="chapterSelector.disabled">Close</button>
					</div>
				</div>
				<span id="rounds">{{ game.rounds.length }}</span>
				<span id="lives">{{ game.lives }}</span>
				<div id="verse">{{ game.currentRound.verse_text }}</div>
				<input v-model="bookList.filter" placeholder="Book">
				<div id="book-list" v-bind:class="((!game.playing || !bookList.clickable) ? 'not-' : '') + 'clickable'">
					<span
						v-on:click="chooseBook(book.position)"
						v-bind:class="'book' + (book.class ? ' ' + book.class : '')"
						v-for="book in bookListFiltered"
					>{{ book.name }}</span>
				</div>
			</div>
		</div>

		<script id="message-box-template" type="text/x-template">
			<div id="message-box" v-on:click="clearMessage" v-bind:class="'message-level-' + level">{{ text }}</div>
		</script>

		<script id="start-menu-template" type="text/x-template">
			<div id="start-menu">
				<p>Testaments</p>
				<label>Old<input type="checkbox" v-model="oldTestament"></label>
				<br>
				<label>New<input type="checkbox" v-model="newTestament"></label>
				<br>
				Difficulty
				<label id="difficulty-switch">
					<input type="checkbox" v-model="difficultyEasy">
					<div id="difficulty-slider">
						<span class="on">Easy</span>
						<span class="off">Hard</span>
					</div>
				</label>
				<br>
				<button v-on:click="$emit('submitted', testamentCode, Number(!difficultyEasy))" v-bind:disabled="invalid">Start Game</button>
			</div>
		</script>

		<script type="text/javascript" src="/index.js"></script>
	</body>
</html>